{% extends 'base.html' %}
{% load static i18n %}

{% block content %}
<main>
    <!-- Trending Area Start -->
    <div class="trending-area fix">
        <div class="container">
            <div class="trending-main">
                <!-- Trending Title -->
                <div class="row">
                    <div class="col-lg-8">
                        <!-- Trending Top -->
                        <div class="trending-top mb-30">
                            <div class="trend-top-img">
                                <!-- Optionally, include a featured image or another main element here -->
                            </div>
                        </div>

                        <!-- Trending Bottom -->
                        <div class="trending-bottom">
                            <div class="row">
                                {% for post in page_obj %}
                                <div class="col-lg-4 col-md-6">
                                    <div class="single-bottom mb-35">
                                        <div class="trend-bottom-img mb-30">
                                            {% if post.image %}
                                                <img src="{{ post.image }}" alt="{{ post.title }}" width="240" height="160">
                                            {% endif %}
                                        </div>
                                        <div class="trend-bottom-cap">
                                            <span class="color1">{{ post.category_name }}</span>
                                            <h4><a href="{% url 'post_detail' post.slug %}">{{ post.title }}</a></h4>
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <p>{% trans "No posts available in this category." %}</p>
                                {% endfor %}
                            </div>
                        </div>
                    </div>

                    <!-- Right Content -->
                    <!-- Add other sections or widgets here, like related posts or advertisements -->
                </div>
            </div>
        </div>
    </div>
    <!-- Trending Area End -->

    <!-- Pagination Start -->
    <div class="pagination-area pb-45 text-center">
        <div class="container">
            <div class="row">
                <div class="col-xl-12">
                    <div class="single-wrap d-flex justify-content-center">
                        <nav aria-label="Page navigation example">
                            <ul class="pagination justify-content-start">
                                {% if page_obj.has_previous %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.previous_page_number }}">
                                            <span class="flaticon-arrow roted"></span>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#">
                                            <span class="flaticon-arrow roted"></span>
                                        </a>
                                    </li>
                                {% endif %}

                                {% for num in page_obj.paginator.page_range %}
                                    {% if page_obj.number == num %}
                                        <li class="page-item active"><a class="page-link" href="#">{{ num }}</a></li>
                                    {% else %}
                                        <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                                    {% endif %}
                                {% endfor %}

                                {% if page_obj.has_next %}
                                    <li class="page-item">
                                        <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                                            <span class="flaticon-arrow right-arrow"></span>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="page-item disabled">
                                        <a class="page-link" href="#">
                                            <span class="flaticon-arrow right-arrow"></span>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Pagination -->

</main>
{% endblock %}

<script>
    function changeLanguage(langCode) {
        const url = new URL(window.location.href);
        url.searchParams.set('lang', langCode);
        window.location.href = url.toString();
    }
</script>
